# Container image configuration
image:
  repository: ghcr.io/aladex/key-aws-exporter
  tag: "latest"
  pullPolicy: IfNotPresent

imagePullSecrets: []

nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations: {}
podLabels: {}

podSecurityContext: {}
securityContext:
  readOnlyRootFilesystem: true
  allowPrivilegeEscalation: false

service:
  type: ClusterIP
  port: 8080

serviceMonitor:
  enabled: false
  namespace: ""
  interval: 30s
  scrapeTimeout: ""
  labels: {}
  annotations: {}
  metricRelabelings: []
  relabelings: []

resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 200m
    memory: 256Mi

nodeSelector: {}
tolerations: []
affinity: {}

# Extra environment variables for the exporter
# Provide either S3_ENDPOINTS_JSON or legacy env vars via this map or via existingSecret
env:
  AUTO_VALIDATE_INTERVAL: "30s"
  EXPORTER_PORT: "8080"

extraEnv: []
  # - name: S3_ENDPOINTS_JSON
  #   value: |
  #     [
  #       {"name": "bucket-a", "bucket": "bucket-a", "access_key": "...", "secret_key": "..."}
  #     ]

# Optionally reference an existing secret containing env variables
existingSecret: ""

# Liveness/readiness probes
livenessProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 10
  periodSeconds: 30

readinessProbe:
  httpGet:
    path: /health
    port: http
  initialDelaySeconds: 5
  periodSeconds: 15

replicaCount: 1
